% theorem boxes -- see https://web.stanford.edu/~lindrew/

\usepackage{thmtools}
\usepackage[framemethod = TikZ]{mdframed}
\usepackage{silence} % for suppressing warnings 
\WarningFilter{mdframed}{You got a bad break}

\mdfsetup{
    linewidth = 0mm, %0.4mm
    innertopmargin = 2.6mm,
    innerbottommargin = 3.8mm,
    innerleftmargin = 3mm,
    innerrightmargin = 3mm,
    skipabove=14pt,
    skipbelow=0pt
} % adjusts boundaries of boxes

\newcommand{\thmboxstyle}[4]{
    \mdfdefinestyle{#2}{
        linecolor = #3,
        backgroundcolor = #4,
        nobreak = true,
        leftline = true,
        rightline=false,
        topline=false,
	bottomline=false,
        linewidth = 3pt,
    }
    \declaretheoremstyle[
        headfont = \bfseries\color{#3},
        mdframed = {style = #2},
        headpunct = {\\[0.4pt]},
        postheadspace = {0pt},
        bodyfont=\normalfont,
    ]{#1}
}

% five different colors of boxes

% \thmboxstyle{defbox}{mdredbox}{red}{orange!5}
\thmboxstyle{defbox}{mdredbox}{purple!50!blue}{purple!6!blue!3}
% \thmboxstyle{exbox}{mdgreenbox}{green!70!black}{teal!4}
\thmboxstyle{exbox}{mdgreenbox}{blue!90!red}{cyan!5!blue!1}
\thmboxstyle{thmbox}{mdbluebox}{magenta!90!purple}{pink!8}

\thmboxstyle{notebox}{mdorangebox}{orange!50!brown}{yellow!5!olive!5}
\thmboxstyle{lembox}{mdpurplebox}{purple!50!blue}{purple!5!blue!3}

% \newcommand{\mypreheadhook}{{\abovedisplayskip=0pt\belowdisplayskip=0pt}} idk ctrl f instead
% okay i don't know why declaretheorem doesn't expand macros but whatever lol

% \declaretheorem[style = thmbox, name = Theorem]{theorem}
\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = thmbox, name = Theorem, numberwithin = section]{theorem}
    
\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = lembox, name = Lemma, sibling = theorem]{lemma}
\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = thmbox, name = Proposition, sibling = theorem]{proposition}
\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = thmbox, name = Corollary, sibling = theorem]{corollary}
\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = thmbox, name = Conjecture, sibling = theorem]{conjecture}

\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = thmbox, name = Theorem, numbered = no]{theorem*}
\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = thmbox, name = Lemma, numbered = no]{lemma*}
\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = thmbox, name = Proposition, numbered = no]{proposition*}
\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = thmbox, name = Corollary, numbered = no]{corollary*}
\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = thmbox, name = Conjecture, numbered = no]{conjecture*}

\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = defbox, name = Definition, sibling = theorem]{definition}
\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = defbox, name = Definition, numbered = no]{definition*}

\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = exbox, name = Example, sibling = theorem]{example}
\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = exbox, name = Example, numbered = no]{example*}

\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = notebox, name = Fact, sibling = theorem]{fact}
\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = notebox, name = Fact, numbered = no]{fact*}
\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = notebox, name = Problem, sibling = theorem]{problem}
\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = notebox, name = Problem, numbered = no]{problem*}

\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = plain, name = Question, sibling = theorem]{question}
\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = plain, name = Question, numbered = no]{question*}

\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = plain, name = Claim, sibling = theorem]{claim}
\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style = plain, name = Claim, numbered = no]{claim*}

\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style=plain, name=Remark, sibling=theorem]{remark}
\declaretheorem[preheadhook = {\abovedisplayskip=2pt\belowdisplayskip=2pt\abovedisplayshortskip=0pt\belowdisplayshortskip=0pt}, style=plain, name=Remark, numbered=no]{remark*}

